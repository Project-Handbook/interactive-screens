<link rel="stylesheet" type="text/css" href="contact.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

<div class="contact_wrapper">
  <h1>Contact CSC in the text field below if you have an errand.</h1>
  <h2>If you're looking for the KTH Intranet, it can be found on intra.kth.se</h2>
  <h2>Don't forget to supply your email so that they can contact you.</h2>

  <form *ngIf="showForm" [ngFormModel]="form" (submit)="onSubmit(email.fromName, email.fromEmail, email.message)">
    <div class="wrapper">
      <label for="msg">Message</label>
      <br/>
      <textarea required type="text" [(ngModel)]="email.message" placeholder="Description"  ngControl="msgCtrl"></textarea>
      <div class="msgError" *ngIf="msgCtrl.dirty && !msgCtrl.valid">
        <div *ngIf="msgCtrl.errors.minlength" class="formError">
        <i class="fa fa-exclamation-triangle"></i> Your message needs to be longer.
        </div>
      </div>

      <div class="contactInfo">
        <h3>Please supply your contact info here</h3>
        <label for="email">Email</label>
        <br/>
        <input required type="text" [(ngModel)]="email.fromEmail" placeholder="Your mail" ngControl="emailCtrl"/>
        <div class="emailError" *ngIf="emailCtrl.dirty && !emailCtrl.valid">
        <div *ngIf="emailCtrl.errors.isInCorrectEmail" class="formError">
          <i class="fa fa-exclamation-triangle"></i> Invalid format.
        </div>
        </div>
        <br/>
        <label for="name">Name</label>
        <br/>
        <input required type="text" [(ngModel)]="email.fromName" placeholder="Your name" ngControl="nameCtrl"/>
        <br/>
        <label for="captcha">{{captchaA}} + {{captchaB}} = ?</label>
        <br/>
          <input type="number" [(ngModel)]="captchaAnswer" ngControl="captchaCtrl"/>
          <div class="captcha">
          <div *ngIf="!(captchaA + captchaB === captchaAnswer)" class="formError">
            <i class="fa fa-exclamation-triangle"></i> Invalid value.
          </div>
        </div>
      </div>
    </div>

    <div class="buttonArea">
         <button type="submit" [disabled]="!form.valid">Submit</button>
         <div class="formError" *ngIf="(error === true)" role="alert">
          <i class="fa fa-exclamation-triangle"></i> Couldn't send.
        </div>
      <br />
      <div class="succesfulMail" *ngIf="messageSent === true" role="alert">
      <i class="fa fa-check" aria-hidden="true"></i> Message sent!
      </div>
    </div>
  </form>
</div>
