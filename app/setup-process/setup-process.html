
<div class="setup">
  <h1>
    Welcome to the CScreen setup
  </h1>
  <header>
    <a href="https://github.com/Project-Handbook/interactive-screens/wiki/Setup-Documentation"><button type="button">Detailed documentation</button></a>
    <a href="https://github.com/Project-Handbook/interactive-screens/issues"><button type="button">Report an issue</button></a>
    <br />
    <br />
    Or press the the '?' for detailed information about a certain input.
  </header>

  <h2>General Information</h2>

  <table>
    <tr class="item">
      <td>
        <p>Title of the screen</p>
        <input type="text" placeholder="Information Desk" [(ngModel)]="screenInfo.title"/>
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('titleInfo').style.display= document.getElementById('titleInfo').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="titleInfo" class="info" style="display: none;">
        Where the screen is located, this will be shown on the top of the screen.
      </td>
    </tr>

    <tr class="item">
      <td>
        <p>Position of the screen</p>
        <div class="maps" id="map"></div>
        <br>
        <label>Latitude</label>
        <input placeholder="Enter latitude coordinate" [(ngModel)]="screenInfo.latitude"/>
        <br>
        <label>Longitude</label>
        <input placeholder="Enter longitude coordinate" [(ngModel)]="screenInfo.longitude"/>
        <br>
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('coordinatesInfo').style.display= document.getElementById('coordinatesInfo').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="coordinatesInfo" class="info" style="display: none;">
          Enter the coordinates of the position of the screen.
          The coordinates will be used to display the position of the screen in the map view.
          Click on the map or insert them manually in the text fields.
      </td>
    </tr>
  </table>

  <h2>People Tab</h2>
  <table>
    <tr class="item">
      <td>
        <p>Department</p>
        <label>Choose school</label>
        <select id="select-school" [ngModel]="stringify(screenInfo.school)"
          (ngModelChange)="getDepartments($event)" style="width: 100%; padding: 0.2em">
          <option  *ngFor="let school of schools" [ngValue]="stringify(school)">
            {{ school.school }}
          </option>
        </select>
        <br><br>
        <label>Default department</label>
        <select enabled="false" [ngModel]="stringify(screenInfo.department)"
          (ngModelChange)="setDepartment($event)" id="select-department" style="width: 100%; padding: 0.2em">
          <option *ngFor="let department of department_list" [ngValue]="stringify(department)">
              {{department.name_sv}}
          </option>
        </select>
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('department_code_info').style.display= document.getElementById('department_code_info').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="department_code_info" class="info" style="display: none;">
          This deparment will be displayed by default when there is no search in the People tab.
      </td>
    </tr>
  </table>

  <h2>Home Tab</h2>
  <table>
    <tr class="item">
      <td>
        <p>Calendar Polypoly Id</p>
        <input type="text" placeholder="1.234567" [(ngModel)]="screenInfo.calendar_polypoly_id"/>
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('home_polypoly_id').style.display= document.getElementById('home_polypoly_id').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="home_polypoly_id" class="info" style="display: none;">
          These ID will be used to fetch the calendar and news feed that is displayed in the home view.
      </td>
    </tr>
    <tr class="item">
      <td>
        <p>News feed Polypoly Id</p>
        <input type="text" placeholder="1.234567" [(ngModel)]="screenInfo.news_feed_polypoly_id"/>
      </td>
    </tr>
  </table>

  <h2>Sidebar Information</h2>
  <table>
    <tr class="item">
      <td>
        <p>Address</p>
        <input type="text" placeholder="Avenue Street 123" [(ngModel)]="screenInfo.address"/>
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('addressInfo').style.display= document.getElementById('addressInfo').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="addressInfo" class="info" style="display: none;">
        Where the screen is located, this will be shown on the top of the screen.
      </td>
    </tr>

    <tr class="item">
      <td>
        <p>Postal code</p>
        <input type="text" placeholder="12345" [(ngModel)]="screenInfo.postal_code">
      </td>
    </tr>

    <tr class="item">
      <td>
        <p>City</p>
        <input type="text" placeholder="Stockholm" [(ngModel)]="screenInfo.city">
      </td>
    </tr>

    <tr class="item">
      <td>
        <p>Telephone number</p>
        <input type="text" placeholder="+46 076 123 123" [(ngModel)]="screenInfo.telephoneNumber" />
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('telephoneInfo').style.display= document.getElementById('telephoneInfo').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="telephoneInfo" class="info" style="display: none;">
        Telephone number to which the visitors, amongs others, should be calling.
      </td>
    </tr>

    <tr class="item">
      <td>
        <p>Telephone number for deliveries</p>
        <input type="text" placeholder="+46 076 321 321" [(ngModel)]="screenInfo.telephone_deliveries" />
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('telephone_deliveries').style.display= document.getElementById('telephone_deliveries').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="telephone_deliveries" class="info" style="display: none;">
        Telephone number to which the delivery man should be calling.
      </td>
    </tr>
    <tr class="item">
      <td>
        <p>Additional delivery information</p>
        <input type="text" placeholder="Defliveries to PDC: please visit PDC.." [(ngModel)]="screenInfo.additional_delivery_info" />
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('additional_delivery_information').style.display= document.getElementById('additional_delivery_information').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="additional_delivery_information" class="info" style="display: none;">
        Additional delivery information can be entered in this text field and will displayed below the telephone numbers
        in the right sidebar.
      </td>
    </tr>
    <tr class="item">
      <td>
        <p>Nearby Departments</p>
        <br>
        <label>Choose school</label>
        <label>choose department</label>
        <!-- [ngModel]="c"  is just a dummy variable that is only used because [ngModelChange] requires
       that a [ngModel] tag i present on the select tag. But since the school info does not need to be saved
        we just bind it to a variable that doenst exist-->
        <select id="select-nearby-school" [ngModel]="s"
          (ngModelChange)="getNearbyDepartments($event)" style="width: 100%; padding: 0.2em">
          <option  *ngFor="let school of schools" [ngValue]="stringify(school)">
            {{ school.school }}
          </option>
        </select>
        <br><br>
        <select enabled="false" [ngModel]="c"
          (ngModelChange)="setNearbyDepartment($event)" id="select-nearby-department" style="width: 100%; padding: 0.2em">
          <option *ngFor="let department of department_list" [ngValue]="stringify(department)">
              {{department.name_sv}}
          </option>
        </select>
        <br><br>
        <label>Display name: (Optional)</label>
        <input type="text" placeholder="Optional name.." [(ngModel)]="optional_name"/>
        <br><br>
        <p>
          <button (click)="addDepartment()" style="float:right;">Add</button>
        </p>
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('nearby_departments').style.display= document.getElementById('nearby_departments').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="nearby_departments" class="info" style="display: none;">
        Departments located in the close vicinity of the screen, in the same building and so on.
        Add all the departments that are close then in the next field you select
        the one which is the closest to the screen. The text field "Display name" gives the option of
        giving the department a new name that will be used when dispalying the closeby departments
        in the menu on the righthand side of the application. If this field is left blank, the name displayed
        in the dropdown menu will be choosen.
      </td>
    </tr>

    <tr class="item">
      <td>
        <p>Nearest department</p>
        <select [(ngModel)]="screenInfo.nearest_department" style="width: 90%">
          <option *ngFor="let department of departments">{{ department.name_sv }}</option>
        </select>
        <button (click)="removeDepartment()" style="float: right; padding: 0.2em;">Remove</button>
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('nearest-department').style.display= document.getElementById('nearest-department').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="nearest-department" class="info" style="display: none;">
        Nearest department in relationship to the screen.
        Select the department associated with the screen.
      </td>
    </tr>

    <tr class="item">
      <td>
        <p>Opening hours</p>
        Show opening hours? <input class="toggle-box" type="checkbox" (click)="toggleOpeningHours()"> <br/>
        <div *ngIf="screenInfo.opening_hours_enabled">
          <div *ngFor="let weekday of weekdays">
            <div>
              <h3>{{ weekday }}</h3>
              <label>Closed: <input class="toggle-box" type="checkbox" (click)="toggleOpeningHoursDay(weekday)"></label>
            </div>
            <div *ngIf="screenInfo.opening_hours[weekday][2]">
              From: <input type="time" style="width: 15%;" placeholder="HH:mm" [(ngModel)]="screenInfo.opening_hours[weekday][0]">
              To:   <input type="time" style="width: 15%;" placeholder="HH:mm" [(ngModel)]="screenInfo.opening_hours[weekday][1]">
            </div>
          </div>
        </div>
      </td>
      <td>
        <a href="javascript:void(0)" onclick="document.getElementById('opening-hours').style.display= document.getElementById('opening-hours').style.display == 'none' ? 'block' : 'none';">
          <div class="qmark">?</div>
        </a>
      </td>
      <td id="opening-hours" class="info" style="display: none;">
        Opening hours of the nearest department, for example the closest reception to the screen, etc.
        Format as 11:00, 13:37, etc.
      </td>
    </tr>

  </table>

  <button class="button" type="submit" (click)="saveInformation()">Save</button>

  <!-- Padding -->
  <div style="height: 20rem"></div>

</div>
